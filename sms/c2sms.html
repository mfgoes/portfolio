<!doctype html>
<html class="no-js" lang="">
    <head>

            <meta charset="utf-8">
            <meta http-equiv="x-ua-compatible" content="ie=edge">
            <meta name="description" content="">
            <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Global site tag (gtag.js) - Google AdWords: 955667501 -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=AW-955667501"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'AW-955667501');
        </script>


</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript type="text/javascript" data-cfasync="false"><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PVP32D"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/click2sms.js"></script>
<script type="text/javascript">

var shortcode ='';
var keyword = '';
var gclid = '';
var source = '';
/**
 * For testing purposes, we're trying to test a limited number of markets.
 * When the "source" is allowed, then contact the server for a tracking slot to track the conversion.
  * @type {string[]}
 */
var testSources = ["germany", "hungary", "uk"];

$(document).ready(function () {
    shortcode = getUrlParameter('shortcode');
    keyword = getUrlParameter('keyword');
    gclid = getUrlParameter('gclid');
    source = getUrlParameter("source");
    if (shortcode) {
        generateMsg();
    } else {
        console.warn("Shortcode could not be processed, aborting");
    }
});

function generateMsg() {
    if (gclid && source && testSources.indexOf(source.toLowerCase()) > -1) {
        var url = "https://tracking.cm8.io/api/conversiontracking/clicks/" + gclid;
        if (source) {
            url += "?source=" + source.toLowerCase();
        }
        $.get(url, function (resp) {
            code = resp.slotId;
            generateSms(shortcode, keyword, code);
        }, 'jsonp');
    } else {
        generateSms(shortcode, keyword);
    }
}

function generateSms(shortCode, keyword, code) {
    var smsBody = code ? (code + " " + keyword) : keyword;
    var versionAndroidArr = [];
    var versionAndroid = '';
    getDevice();
    if (isMobile.any()) {
        if (isMobile.iPhone()) {
            window.location.replace("sms:" + shortCode + "&body=" + smsBody );
        } else if (isMobile.Android()) {
           // versionAndroidArr = window.navigator.userAgent.match(/\s+([\d\.]+)/);
           // versionAndroid = versionAndroidArr.toString().trim();
          //  if(versionAndroid.startsWith("8")){
          //  window.location.replace("http://askbongo.com/bongolp/bongo-uk/crushing_ig_66668/");
          //  }else {
                window.location.replace("sms:" + shortCode + "?body=" + smsBody);
        //    }
        }
    } else {
        alert(keyword);
    }
}
</script>
<!-- Event snippet for YouTube_Click2SMS_Cross Account Conversions conversion page -->
<script>
    gtag('event', 'conversion', {'send_to': 'AW-955667501/ZDK7CL_npoMBEK2o2ccD'});
</script>
</body>
</html>
